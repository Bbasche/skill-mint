"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.KwilSigner = void 0;
const serial_1 = require("../utils/serial");
const signature_1 = require("./signature");
/**
 * The `KwilSigner` class is a utility class for storing a signer and its associated public key. It is used to sign transactions and messages on Kwil.
 */
class KwilSigner {
    /**
     * Actual implementation of the KwilSigner constructor.
     *
     * @param {SignerSupplier} signer - Either an instance of EthSigner or CustomSigner.
     * @param {HexString | Uint8Array} identifier - The identifier associated with the signer (e.g. wallet address, public key, etc). Can be a hex string or bytes (Uint8Array).
     * @param {AnySignatureType} signatureType - (Optional) The type of the signature. If not provided,
     *                        the signature type is determined from the signer.
     */
    constructor(signer, identifier, signatureType) {
        // set signer
        this.signer = signer;
        // set identifier as bytes
        if (typeof identifier === 'string') {
            this.identifier = (0, serial_1.hexToBytes)(identifier);
        }
        else {
            this.identifier = identifier;
        }
        // set signature type, if supplied
        if (signatureType) {
            this.signatureType = signatureType;
        }
        else {
            // infer signature type from signer
            this.signatureType = (0, signature_1.getSignatureType)(signer);
            // throw error if signature type could not be determined
            if (this.signatureType === signature_1.SignatureType.SIGNATURE_TYPE_INVALID) {
                throw new Error('Could not determine signature type from signer. Please pass a signature type to the KwilSigner constructor.');
            }
        }
    }
}
exports.KwilSigner = KwilSigner;
//# sourceMappingURL=kwilSigner.js.map